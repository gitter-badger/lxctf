[Interface]
PrivateKey = {{ lookup('file', role_path+'/files/wireguard_tmp/privatekey-server')}}
Address = 10.42.0.1/24
PostUp = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o ens3 -j MASQUERADE;
PostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o ens3 -j MASQUERADE;
ListenPort = 40{{ '%03d'|format(hostvars[item]['team_num']|int) }}

[Peer]
PublicKey = {{ lookup('file', role_path+'/files/wireguard_tmp/publickey-'+{{ item }}+'-player-1')}}
AllowedIPs = 10.42.{{ item|replace('team','')|int }}.1/32

[Peer]
PublicKey = {{ lookup('file', role_path+'/files/wireguard_tmp/publickey-'+{{ item }}+'-player-2')}}
AllowedIPs = 10.42.{{ item|replace('team','')|int }}.2/32

[Peer]
PublicKey = {{ lookup('file', role_path+'/files/wireguard_tmp/publickey-'+{{ item }}+'-player-3')}}
AllowedIPs = 10.42.{{ item|replace('team','')|int }}.3/32

[Peer]
PublicKey = {{ lookup('file', role_path+'/files/wireguard_tmp/publickey-'+{{ item }}+'-player-4')}}
AllowedIPs = 10.42.{{ item|replace('team','')|int }}.4/32

[Peer]
PublicKey = {{ lookup('file', role_path+'/files/wireguard_tmp/publickey-'+{{ item }}+'-player-5')}}
AllowedIPs = 10.42.{{ item|replace('team','')|int }}.5/32